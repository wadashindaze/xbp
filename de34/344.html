<!DOCTYPE html>
<html lang="jp">
<head>
    <meta charset="UTF-8">
    <title>Corespondence_Analysis</title>
    <link rel="stylesheet" href="css/main.css">

</head>
<body>


<h2>コレスポンデンス分析（対応分析）</h2>
    <canvas id="corepon" width="1000" height="1000"></canvas>

    <h3>累積寄与率</h3>
    ２軸合わせて元のデータの何割を説明することができているかを表した数字。80％以上であれば、元データをかなり反映していると言われています。<br>
    累積寄与率：9.72%

    <h3>読み込みデータ</h3>
        <table border="1" class="dataframe table table-striped">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>楽しさ</th>
      <th>話のわかりやすさ</th>
      <th>最終レポート難易度</th>
      <th>授業態度の厳しさ</th>
      <th>出席参加比率</th>
      <th>課題量</th>
      <th>ためになるか</th>
    </tr>
    <tr>
      <th>項目</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>生物基礎　吉田</th>
      <td>4.0</td>
      <td>5.0</td>
      <td>5</td>
      <td>2</td>
      <td>5</td>
      <td>2.5</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>宗教学　大澤</th>
      <td>3.5</td>
      <td>5.0</td>
      <td>5</td>
      <td>1</td>
      <td>5</td>
      <td>3.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>考古学　鳥越</th>
      <td>2.0</td>
      <td>3.5</td>
      <td>5</td>
      <td>1</td>
      <td>5</td>
      <td>2.0</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>社会と人間　平山</th>
      <td>4.0</td>
      <td>3.5</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>4.5</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>統計学　本間</th>
      <td>1.0</td>
      <td>4.0</td>
      <td>2</td>
      <td>1</td>
      <td>5</td>
      <td>3.0</td>
      <td>2.5</td>
    </tr>
    <tr>
      <th>デジファブ　道用</th>
      <td>5.0</td>
      <td>5.0</td>
      <td>4</td>
      <td>1</td>
      <td>3</td>
      <td>2.5</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
    <h3>プロットデータ</h3>
    <h4>表側</h4>
        <table border="1" class="dataframe table table-striped">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>生物基礎　吉田</th>
      <td>-0.062425</td>
      <td>0.054513</td>
    </tr>
    <tr>
      <th>宗教学　大澤</th>
      <td>-0.129939</td>
      <td>0.041437</td>
    </tr>
    <tr>
      <th>考古学　鳥越</th>
      <td>-0.283495</td>
      <td>-0.001879</td>
    </tr>
    <tr>
      <th>社会と人間　平山</th>
      <td>0.585356</td>
      <td>-0.089428</td>
    </tr>
    <tr>
      <th>統計学　本間</th>
      <td>-0.150494</td>
      <td>-0.338298</td>
    </tr>
    <tr>
      <th>デジファブ　道用</th>
      <td>0.068505</td>
      <td>0.218813</td>
    </tr>
  </tbody>
</table>
    <h4>表頭</h4>
        <table border="1" class="dataframe table table-striped">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>楽しさ</th>
      <td>0.242378</td>
      <td>0.241523</td>
    </tr>
    <tr>
      <th>話のわかりやすさ</th>
      <td>-0.023733</td>
      <td>-0.023667</td>
    </tr>
    <tr>
      <th>最終レポート難易度</th>
      <td>-0.309986</td>
      <td>0.163822</td>
    </tr>
    <tr>
      <th>授業態度の厳しさ</th>
      <td>0.472644</td>
      <td>-0.165263</td>
    </tr>
    <tr>
      <th>出席参加比率</th>
      <td>-0.365298</td>
      <td>-0.169485</td>
    </tr>
    <tr>
      <th>課題量</th>
      <td>0.265592</td>
      <td>-0.217985</td>
    </tr>
    <tr>
      <th>ためになるか</th>
      <td>0.114482</td>
      <td>0.074281</td>
    </tr>
  </tbody>
</table>

</body>
    <script>
        function draw() {
            var row_data = JSON.stringify([[-0.06242527304982235, 0.05451272327512657], [-0.1299386619528597, 0.041436563360921164], [-0.28349494002892456, -0.0018791135331458742], [0.5853564242336803, -0.08942829824335105], [-0.15049405314602565, -0.3382978492717658], [0.06850454257007714, 0.21881319986157982]]);
            var row_data_j = JSON.parse(row_data);
            var col_data = JSON.stringify([[0.24237809587759968, 0.24152278065818591], [-0.023732816663398243, -0.023667118575118724], [-0.3099855643006751, 0.16382186505105706], [0.4726436759780587, -0.16526307434216841], [-0.3652975753016592, -0.169485399551737], [0.2655918999818249, -0.21798459197622863], [0.11448236675579392, 0.07428077541779589]]);
            var col_data_j = JSON.parse(col_data);
            var row_index = JSON.stringify(["\u751f\u7269\u57fa\u790e\u3000\u5409\u7530", "\u5b97\u6559\u5b66\u3000\u5927\u6fa4", "\u8003\u53e4\u5b66\u3000\u9ce5\u8d8a", "\u793e\u4f1a\u3068\u4eba\u9593\u3000\u5e73\u5c71\u3000", "\u7d71\u8a08\u5b66\u3000\u672c\u9593", "\u30c7\u30b8\u30d5\u30a1\u30d6\u3000\u9053\u7528"]);
            var row_index_j = JSON.parse(row_index);
            var col_index = JSON.stringify(["\u697d\u3057\u3055", "\u8a71\u306e\u308f\u304b\u308a\u3084\u3059\u3055", "\u6700\u7d42\u30ec\u30dd\u30fc\u30c8\u96e3\u6613\u5ea6", "\u6388\u696d\u614b\u5ea6\u306e\u53b3\u3057\u3055", "\u51fa\u5e2d\u53c2\u52a0\u6bd4\u7387", "\u8ab2\u984c\u91cf", "\u305f\u3081\u306b\u306a\u308b\u304b"]);
            var col_index_j = JSON.parse(col_index);
            var canvas = document.getElementById("corepon");
            var ctx = document.getElementById("corepon").getContext("2d");

            var x_center;
            var y_center;

            var max_val;
            var graph_size=800;
            var margin =1.2;

            canvas.width=graph_size;
            canvas.height=graph_size;
            x_center = canvas.width/2;
            y_center = canvas.height/2;
            //グラフメモリの最大値を決める--------------------
            max_val=0;
            for(var r=0;r<row_data_j.length;r++){
                for(var c=0;c<row_data_j[r].length;c++){
                    if(Math.abs(row_data_j[r][c])>max_val){
                        max_val = Math.abs(row_data_j[r][c]);
                    }
                }
            }
            for(var r=0;r<col_data_j.length;r++){
                for(var c=0;c<col_data_j[r].length;c++){
                    if(Math.abs(col_data_j[r][c])>max_val){
                        max_val = Math.abs(col_data_j[r][c]);

                    }
                }
            }
            max_val=Math.ceil(margin * max_val*10)/10;
            //---------------------------------------------

            //x座標、y座標を指定-----------------------------
            ctx.beginPath();
                ctx.lineWidth = 0.5;
                ctx.moveTo(0, y_center);
                ctx.lineTo(canvas.width, y_center);
                ctx.moveTo(x_center, 0);
                ctx.lineTo(x_center, canvas.height);
            ctx.stroke();

            //ctx.fillText(aaa, x_center, y_center);

            var point_r = 7
            var myfont = "13px Ludica Sans Unicode"
            //表側プロット-----------------------------
            for(var r=0;r<row_data_j.length;r++){
                var scale = graph_size / 2 / max_val;
                var x = row_data_j[r][0] * scale + x_center;
                var y = row_data_j[r][1] * scale * (-1) + y_center;
                var idx = row_index_j[r];
                ctx.beginPath();
                ctx.fillStyle = 'rgba(255,105,180, 0.7)'; //ピンク
                ctx.arc(x, y, point_r, 0, Math.PI * 2, false);
                ctx.fill();
                ctx.fillStyle = 'rgb(10,10,10)';
                ctx.font =myfont;
                ctx.fillText(idx, x, y);
             }
            //表頭プロット-----------------------------
            for(var r=0;r<col_data_j.length;r++){
                var scale = graph_size / 2 / max_val;
                var x = col_data_j[r][0] * scale + x_center;
                var y = col_data_j[r][1] * scale * (-1) + y_center;
                var idx = col_index_j[r];
                ctx.beginPath();
                ctx.fillStyle = 'rgba(0,160,233, 0.7)'; //ピンク
                ctx.arc(x, y, point_r, 0, Math.PI * 2, false);
                ctx.fill();
                ctx.fillStyle = 'rgb(10,10,10)';
                ctx.font =myfont;
                ctx.fillText(idx, x, y);
             }
        }

        window.addEventListener("load", draw);
    </script>

</html>